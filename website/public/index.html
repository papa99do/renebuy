<!DOCTYPE html>

<html>
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Rene Buy</title>
	<!-- <link rel="shortcut icon" href="/favicon.ico?v=2" type="image/x-icon"> -->
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-resource.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.css" />

	<link rel="stylesheet" href="css/xeditable.css" />
	<link rel="stylesheet" href="css/main.css" />
	<script src="js/xeditable.js"></script>
	<script src="js/core.js"></script>

</head>
<body ng-app="main">
	<div ng-controller="ProductCtrl">
		<nav class="navbar navbar-default">
		  <div class="container-fluid">
		    <div class="navbar-header">
		      <a class="navbar-brand" href="#">
		        ReneBuy
		      </a>
		    </div>
			<form class="navbar-form navbar-left" role="search">
			    <div class="form-group">
			      <input type="text" class="form-control" ng-model="searchText" size="40">
			    </div>
			  <button type="submit" ng-click="search()" class="btn btn-default">Search</button>
			</form>
		  </div>
		</nav>
		
		<div id="productList">
			<div class="col-lg-6 col-sm-12" ng-repeat="product in products">
			<div class="product-tile">
				<h4 class="productName">
					{{product.name}}
				</h4>
				<h5>
					<a href="#" editable-text="product.nameInChinese" onaftersave="updateNameInChinese(product)">
					    {{product.nameInChinese || '点此输入中文名称'}}
					</a>
				</h5>
				<div class="row">
					
				
				<div class="col-lg-3 col-sm-3">
					<img src="{{product.photos[0]}}" alt="{{product.name}}">
				</div>
				<div class="col-lg-9 col-sm-9">
					<div>
						Category: 
						<a href="#" editable-text="product.categoryStr" onaftersave="updateCategory(product)">
						    {{ product.categoryStr }}
						</a>
					</div>
					<ul id="prices">
						<li>RRP: <span class="rrp">{{product.rrp | currency}}</span></li>
						<li ng-repeat="store in product.stores">
							<a href="{{store.detailUrl}}" target="_blank">{{store.storeName}}</a>
							<span class="price">{{store.price | currency}}</span>
							({{(product.rrp - store.price) / product.rrp | percentage:0}} off)
							(L:<span class="price">{{store.lowestPrice | currency}}</span>)
						</li>
						<li>
							<span><a href="http://s.taobao.com/search?q={{product.name}}&style=list" target="_blank">Taobao Price Indicator</a></span>
						</li>
					</ul>
					<div>
						Weight: <input type="text" ng-model="product.weight" size="1" ng-change="updateWeight(product)" ng-model-options="{ updateOn: 'blur' }">g, 
						Postage: {{postage(product) | currency}}
					</div>
					<div>
						ReneBuyPrice: <span class="price">{{reneBuyPriceInRmb(product) | currency:'RMB '}} </span>
						+ <input type="text" ng-model="product.priceAdjustment" size="1" ng-change="updatePriceAdjustment(product)" ng-model-options="{ updateOn: 'blur' }">
						= <span class="price">{{reneBuyPriceInRmbWithAdjustment(product) | currency:''}} </span>
					</div>
				</div>
				</div>
			</div>
			</div>
		</div>
	</div>

</body>
</html>